---
import React, { useEffect, useState } from 'react';
import DefaultLayout from '../layouts/DefaultLayout.astro'
import Hero from './Hero.astro'
import Feature from './Feature.astro'
import Counter from './Counter.astro'
import ContentMedia from './ContentMedia.astro'
import SearchBar from './SearchBar.astro';

const res = await fetch('https://acc-directus.sabah.gov.my/items/blog');
const jsonData = await res.json();
// const titles = jsonData.data.map(item => item.title_blog);
// const text = jsonData.data.map(item => item.blog_text);
// const id = jsonData.data.map(item => item.id);
// const pdf = jsonData.data.map(item => item.File_Policy);
// // console.log(titles);
// const desc = jsonData.data.map(item => item.Description);

  const displayArray = jsonData.data.map(item => ({
    id: item.id,
    status: item.status,
    title: item.title_blog,
    summary:item.ringkasan,
    // text: item.blog_text,
    date: item.tarikh,
    cover: item.cover_photo || ''
  }));

  // console.log(displayArray);


const data=displayArray;

---



 
    
    
  <div class="mx-auto max-w-7xl px-16">
    <div class="mx-auto ">
      
      <div class="mt-16 space-y-20 lg:mt-20 ">
        {data.map(item => (
    <div key={item.id}>
        <article class="relative isolate flex flex-col gap-8 lg:flex-row">
          <div class="relative aspect-[16/9] sm:aspect-[2/1] lg:aspect-square lg:w-96 lg:shrink-0">
            <img src={`https://acc-directus.sabah.gov.my/assets/${item.cover} `} alt="" class="absolute inset-0 h-full w-full rounded-2xl bg-gray-50 object-cover">
            <div class="absolute inset-0 rounded-2xl ring-1 ring-inset ring-gray-900/10"></div>
          </div>
          <div>
            <div class="flex items-center  text-md">
              <time datetime="2020-03-16" class="">{item.date}</time>
              
            </div>
            <div class="group relative max-w-xl">
              <h3 class="mt-3 text-3xl font-semibold leading-6 capitalize group-hover:">
                
                  <span class="absolute inset-0"></span>
                  {item.title}
                
              </h3>
              <p class="mt-5 text-lg leading-6 ">{item.summary}
              </p>
            </div>
            <div class="mt-6 flex border-t border-gray-900/5 pt-6">
              
            </div>
          </div>
        </article>
      </div>
  ))}
               
       
      </div>
    </div>
  
</div>


  

  
  


